---
sidebar_position: 4
---

# Husky

## Install husky

```bash
npm install husky --save-dev
```

## Configure husky

```bash
npx husky init
```

## Configure `pre-commit` hook

```bash
touch .husky/pre-commit
```

`.husky/pre-commit` file:

```bash
echo "üìå Running pre-commit hook..."

npm run lint ||
    (
        echo "‚ùå Lint Check Failed."
        false
    )

npm run format:check ||
    (
        echo "‚ùå Format Check Failed."
        false
    )
```

## Configure `commit-msg` hook

```bash
npm install --save-dev @commitlint/cli @commitlint/config-conventional
```

```bash
touch commitlint.config.js
touch .husky/commit-msg
```

`commitlint.config.js` file:

```js
module.exports = {
    extends: ["@commitlint/config-conventional"],
};
```

`.husky/commit-msg` file:

```bash
echo "üìå Running commit-msg hook..."

npx commitlint --edit "$1" ||
    (
        echo "‚ùå Stupid Commit Message."
        false
    )
```

## Configure `pre-push` hook

```bash
touch .husky/pre-push
```

`.husky/pre-push` file:

```bash
echo "üìå Running pre-push hook..."

branch_name=$(git symbolic-ref --short HEAD)

# allowed exact names
exceptions="main develop"

# check if it's one of the exceptions
for exception in $exceptions; do
  if [ "$branch_name" = "$exception" ]; then
    echo "‚úÖ Branch name is valid (exception): $branch_name"
    exit 0
  fi
done

# check against allowed patterns
if echo "$branch_name" | grep -Eq '^(feat|fix|release|chore|hotfix|refactor|test)/[a-z0-9._-]+$'; then
  echo "‚úÖ Branch name is valid: $branch_name"
  exit 0
fi

# if it doesn't match anything, fail
echo "‚ùå Invalid Branch Name: '$branch_name'"
echo "‚úÖ Use one of the following formats:"
echo "   - (feat|fix|release|chore|hotfix|refactor|test)/branch-name"
exit 1
```


## References

- [husky document](https://typicode.github.io/husky/)